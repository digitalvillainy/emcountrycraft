url = "/store/search"
layout = "default"
title = "Store Search"
meta_title = "Store Search | Welcome to Em's Country Crafts!"

[collection Catalog]
handle = "Catalog\Product"

[collection Category]
handle = "Catalog\Category"
==
<?
use Tailor\Models\EntryRecord;


function onInit() {
    $searchTerm = get('term');
    $records = EntryRecord::inSection('Catalog\Product')->get();
    $this['catalogs'] = $records->filter(function($item){
        return $item['title'] === get('term');
    });
}
?>
==

<section class="flex flex-col space-y-16 my-16 place-items-center">
    <h1 class="text-5xl text-center text-mom-red font-dancing">
        Search Results: {{ searchTerm }}
    </h1>
    <div class="flex flex-col space-y-16 w-10/12 mx-auto lg:w-full place-items-center [&>*:nth-child(even)]:bg-mom-red">
        {{dd(catalogs)}}
        {% for catalog in catalogs %}
            {% set url = "/store/item/#{catalog.slug}" %}

            {% partial 'cards/hori-card.htm'
                title=catalog.title
                text=catalog.featured_text
                img=catalog.product_image[0].path
                link=['Purchase', url.slug]
                bgColor='bg-mom-teal'
            %}
        {% endfor %}
    </div>
    {{posts.links|raw}}
</section>
